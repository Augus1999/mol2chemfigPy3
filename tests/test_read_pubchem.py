import platform
import pytest
from mol2chemfigPy3 import mol2chemfig

_sys = platform.system()

target1 = r"""\chemfig{H-[:210,0.62]-[:150](-[:90]O-[:30,0.62]H)(%
-[:270,,,,draw=none]\mcfcringle{1.3})-[:210](-[:150,0.62]H)-[:270](%
-[:210,0.62]H)-[:330](-[:270,0.62]H)-[:30](-[:90])-[:330,0.62]H}"""
if _sys != "Linux":
    target2 = r"""\chemfig{H-[:120]-[:60](-O-[:300]H)(-[:180,,,,draw=none]\mcfcringle{1.3})%
-[:120](-[:60]H)-[:180](-[:120]H)-[:240](-[:180]H)-[:300](-)-[:240]H}"""
else:
    target2 = r"""\chemfig{H-[:300]-(-[:60]O-H)(-[:240,,,,draw=none]\mcfcringle{1.3})-[:300](%
-H)-[:240](-[:300]H)-[:180](-[:240]H)-[:120](-[:60])-[:180]H}"""
target3 = r"""\chemfig{O=[:270](-[:330](-[:292.5]H)(-[:247.5]H)-[:30]S-[:330]H)-[:210](%
=[:270]O)-[:150]O-[:210]H}"""
target4 = r"""\chemfig{@{sym2}O=[@{sym2-6}:90]@{sym6}(-[@{sym5-6}::60]@{sym5}(%
-[@{sym5-8}::260,0.62]@{sym8}H)(-[@{sym5-9}::340,0.62]@{sym9}H)%
-[@{sym1-5}::60]@{sym1}S-[@{sym1-10}::300,0.62]@{sym10}H)%
-[@{sym6-7}::300]@{sym7}(=[@{sym4-7}::60]@{sym4}O)-[@{sym3-7}::300]@{sym3}O%
-[@{sym3-11}::60,0.62]@{sym11}H}"""
if _sys == "Windows":
    target5 = r"""\chemfig{O=[:60]P(-[::120]O-[::300](-[::277.5]H)(-[::322.5]H)-[::60](%
<[::244]H)-[::328]O-[::72](-[::72](-[::72](-[::72])(<:[::348]H)-[::264]O%
-[::60]H)(<:[::348]H)-[::264]O-[::90.60000000000002,0.739]H)(<[::264]H)%
-[::348]N-[::306](-[::126,0.85,,,draw=none]\mcfcringle{1.03})-[::312]N(%
-[::120,,,,draw=none]\mcfcringle{1.3})-[::60](-[::300]H)-[::60]N-[::60](%
-[::60](-[::60])-[::312]N-[::72](-[::275.2,0.739]H)-[::72]\phantom{N})%
-[::300]N(-[::300]H)-[::60]H)(-[::60]O-[::300]H)-[::240]O-[::60]P(-[::120]O%
-[::300]H)(=[::240]O)-[::0]O-[::300](-[::277.5]H)(-[::322.5]H)-[::60](%
-[::90]O-[::60]H)(<[::270]H)-[::350](-[::90]O-[::60]H)(<[::270]H)-[::0](%
-[::90]O-[::300]H)(<[::270]H)-[::350](-[::57.5]H)(-[::102.5]H)-[::320]N%
-[::60]-[::300](-[::60](-[::300]H)-[::60](-[::300](-[::300]H)(-[::0]H)%
-[::60]H)-[::60](-[::300](-[::300]H)(-[::0]H)-[::60]H)-[::60](-[::300]H)%
-[::60]-[::120,,,,draw=none]\mcfcringle{1.3})-[::300]N=_[::300]-[::300](%
-[::300]\phantom{N})=^[::60]N-[::60](=[::300]O)-[::60]N(-[::300]H)-[::60](%
-[::60])=[::300]O}"""
elif _sys == "Linux":
    target5 = r"""\chemfig{O=[:60]P(-[::120]O-[::300](-[::277.5]H)(-[::322.5]H)-[::60](%
<[::244]H)-[::328]O-[::72](-[::72](-[::72](-[::72])(<:[::348]H)-[::264]O%
-[::60]H)(<:[::348]H)-[::264]O-[::90.60000000000002,0.739]H)(<[::264]H)%
-[::348]N-[::306](-[::126,0.85,,,draw=none]\mcfcringle{1.03})-[::312]N(%
-[::120,,,,draw=none]\mcfcringle{1.3})-[::60](-[::300]H)-[::60]N-[::60](%
-[::60](-[::60])-[::312]N-[::72](-[::275.2,0.739]H)-[::72]\phantom{N})%
-[::300]N(-[::300]H)-[::60]H)(-[::60]O-[::300]H)-[::240]O-[::60]P(-[::120]O%
-[::300]H)(=[::240]O)-[::0]O-[::300](-[::277.5]H)(-[::322.5]H)-[::60](%
-[::90]O-[::60]H)(<[::270]H)-[::0](-[::80]O-[::60]H)(<[::260]H)-[::350](%
-[::90]O-[::300]H)(<[::270]H)-[::0](-[::47.5]H)(-[::92.5]H)-[::310]N-[::60]%
-[::300](-[::60](-[::300]H)-[::60](-[::300](-[::300]H)(-[::0]H)-[::60]H)%
-[::60](-[::300](-[::300]H)(-[::0]H)-[::60]H)-[::60](-[::300]H)-[::60]%
-[::120,,,,draw=none]\mcfcringle{1.3})-[::300]N=_[::300]-[::300](%
-[::300]\phantom{N})=^[::60]N-[::60](=[::300]O)-[::60]N(-[::300]H)-[::60](%
-[::60])=[::300]O}"""
elif _sys == "MacOS":
    target5 = r"""\chemfig{O=[:70]P(-[::120]O-[::300](-[::277.5]H)(-[::322.5]H)-[::60](%
<[::244]H)-[::328]O-[::72](-[::72](-[::72](-[::72])(<:[::348]H)-[::264]O%
-[::60]H)(<:[::348]H)-[::264]O-[::90.60000000000002,0.739]H)(<[::264]H)%
-[::348]N-[::306](-[::126,0.85,,,draw=none]\mcfcringle{1.03})-[::312]N(%
-[::120,,,,draw=none]\mcfcringle{1.3})-[::60](-[::300]H)-[::60]N-[::60](%
-[::60](-[::60])-[::312]N-[::72](-[::275.2,0.739]H)-[::72]\phantom{N})%
-[::300]N(-[::300]H)-[::60]H)(-[::60]O-[::300]H)-[::240]O-[::60]P(-[::120]O%
-[::300]H)(=[::240]O)-[::0]O-[::300](-[::277.5]H)(-[::322.5]H)-[::60](%
-[::90]O-[::60]H)(<[::270]H)-[::350](-[::90]O-[::60]H)(<[::270]H)-[::0](%
-[::90]O-[::300]H)(<[::270]H)-[::350](-[::47.5]H)(-[::92.5]H)-[::310]N%
-[::60]-[::300](-[::60](-[::300]H)-[::60](-[::300](-[::300]H)(-[::0]H)%
-[::60]H)-[::60](-[::300](-[::300]H)(-[::0]H)-[::60]H)-[::60](-[::300]H)%
-[::60]-[::120,,,,draw=none]\mcfcringle{1.3})-[::300]N=_[::300]-[::300](%
-[::300]\phantom{N})=^[::60]N-[::60](=[::300]O)-[::60]N(-[::300]H)-[::60](%
-[::60])=[::300]O}"""


@pytest.mark.parametrize(
    "input_value,arg1,arg2,expected",
    [
        ("996", "", "", target1),
        ("996", "-r", "-u", target2),
        (98, "-u", "-p", target3),
        (98, "-v", "-g sym", target4),
        (8964, "-y add", "-v", target5),
    ],
)
def test(input_value, arg1, arg2, expected):
    assert mol2chemfig(input_value, arg1, arg2, inline=True) == expected
